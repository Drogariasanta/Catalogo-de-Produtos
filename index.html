<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drogaria Santa Maria Pinheirinho</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo">
            <h1>Drogaria Santa Maria Pinheirinho</h1>
        </div>
        <nav>
            <ul>
                <li><a href="#produtos">Produtos</a></li>
                <li><a href="#categorias">Categorias</a></li>
            </ul>
        </nav>
    </header>

    <section id="produtos">
        <h2>Catálogo de Produtos</h2>
        <div id="filtro-categorias">
            <label for="filtro-categoria">Filtrar por categoria:</label>
            <select id="filtro-categoria">
                <!-- As categorias serão carregadas dinamicamente aqui -->
            </select>
        </div>
        <div id="produtos-lista">
            <!-- Produtos serão carregados aqui -->
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Drogaria Santa Maria Pinheirinho</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQulmY7T7U6PseDk2kouwSzi7E_Fp_i8rxwuLawd4I77MPQvLP3PRGtWWE5_Oz0_MoPyQ2GqQYppGL-/pub?output=csv";
            fetch(url)
                .then(response => response.text())
                .then(data => {
                    const rows = data.split("\n").slice(1);  // Ignorar o cabeçalho
                    const produtos = [];
                    const categorias = new Set();
                    
                    rows.forEach(row => {
                        const cols = row.split(",");
                        const produto = {
                            nome: cols[0], 
                            categoria: cols[1], 
                            descricao: cols[2], 
                            preco: cols[3], 
                            imagem: cols[4]  // Link direto da imagem
                        };
                        produtos.push(produto);
                        categorias.add(produto.categoria);
                    });

                    // Adicionar categorias ao filtro
                    const categoriaSelect = document.getElementById("filtro-categoria");
                    categorias.forEach(categoria => {
                        const option = document.createElement("option");
                        option.value = categoria;
                        option.textContent = categoria;
                        categoriaSelect.appendChild(option);
                    });

                    // Exibir produtos
                    function mostrarProdutos(categoriaFiltro = '') {
                        const lista = document.getElementById("produtos-lista");
                        lista.innerHTML = ''; // Limpar lista
                        produtos.forEach(produto => {
                            if (categoriaFiltro === '' || produto.categoria === categoriaFiltro) {
                                const item = document.createElement("div");
                                item.classList.add("produto");
                                item.innerHTML = `
                                    <img src="${produto.imagem}" alt="${produto.nome}">
                                    <h3>${produto.nome}</h3>
                                    <p>${produto.descricao}</p>
                                    <p><strong>Preço:</strong> R$ ${produto.preco}</p>
                                `;
                                lista.appendChild(item);
                            }
                        });
                    }

                    // Carregar os produtos ao selecionar uma categoria
                    categoriaSelect.addEventListener("change", function () {
                        mostrarProdutos(this.value);
                    });

                    // Inicializar com todos os produtos
                    mostrarProdutos();

                })
                .catch(error => {
                    console.error("Erro ao carregar os dados:", error);
                });
        });
    </script>
</body>
</html>
